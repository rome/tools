# `analyzeDependencies.test.ts`

**DO NOT MODIFY**. This file has been autogenerated. Run `rome test packages/@romejs/js-compiler/api/analyzeDependencies.test.ts --update-snapshots` to update.

## `correctly identifies a file with cjs exports as cjs`

```javascript
Object {
  dependencies: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {}
  exports: Array [
    local {
      kind: 'value'
      name: 'foo'
      valueType: 'other'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 25
          index: 26
          line: 2
        }
        start: Object {
          column: 20
          index: 21
          line: 2
        }
      }
    }
  ]
  diagnostics: Array [
    Object {
      origins: Array [Object {category: 'analyzeDependencies'}]
      description: Object {
        category: 'analyzeDependencies/cjsExportInES'
        message: PARTIAL_BLESSED_DIAGNOSTIC_MESSAGE {value: 'You cannot use CommonJS exports in an ES module'}
      }
      location: Object {
        filename: 'unknown'
        language: 'js'
        mtime: undefined
        sourceType: 'module'
        end: Object {
          column: 25
          index: 26
          line: 2
        }
        start: Object {
          column: 6
          index: 7
          line: 2
        }
      }
    }
  ]
}
```

## `correctly identifies a file with es exports as es`

```javascript
Object {
  dependencies: Array []
  diagnostics: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {
    foo: Object {
      filename: 'unknown'
      end: Object {
        column: 22
        index: 23
        line: 2
      }
      start: Object {
        column: 19
        index: 20
        line: 2
      }
    }
  }
  exports: Array [
    local {
      kind: 'value'
      name: 'foo'
      valueType: 'other'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 22
          index: 23
          line: 2
        }
        start: Object {
          column: 19
          index: 20
          line: 2
        }
      }
    }
  ]
}
```

## `correctly identifies a file with es imports as es`

```javascript
Object {
  diagnostics: Array []
  exports: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {}
  dependencies: Array [
    es {
      kind: 'value'
      all: false
      async: false
      names: Array []
      optional: false
      source: 'bar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 18
          index: 19
          line: 2
        }
        start: Object {
          column: 13
          index: 14
          line: 2
        }
      }
    }
  ]
}
```

## `correctly identifies a file with no imports or exports as unknown`

```javascript
Object {
  dependencies: Array []
  diagnostics: Array []
  exports: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {}
}
```

## `defines topLevelLocalBindings`

```javascript
Object {
  diagnostics: Array []
  exports: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {
    bar: Object {
      filename: 'unknown'
      end: Object {
        column: 15
        index: 16
        line: 2
      }
      start: Object {
        column: 12
        index: 13
        line: 2
      }
    }
    foo: Object {
      filename: 'unknown'
      end: Object {
        column: 13
        index: 43
        line: 3
      }
      start: Object {
        column: 10
        index: 40
        line: 3
      }
    }
  }
  dependencies: Array [
    es {
      kind: 'value'
      all: false
      async: false
      optional: false
      source: 'foo'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 27
          index: 28
          line: 2
        }
        start: Object {
          column: 22
          index: 23
          line: 2
        }
      }
      names: Array [
        value {
          name: 'bar'
          loc: Object {
            filename: 'unknown'
            end: Object {
              column: 15
              index: 16
              line: 2
            }
            start: Object {
              column: 12
              index: 13
              line: 2
            }
          }
        }
      ]
    }
  ]
}
```

## `disallow mix of es and cjs exports`

```javascript
Object {
  dependencies: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'cjs'
  syntax: Array []
  topLevelLocalBindings: Object {
    foo: Object {
      filename: 'unknown'
      end: Object {
        column: 22
        index: 23
        line: 2
      }
      start: Object {
        column: 19
        index: 20
        line: 2
      }
    }
  }
  diagnostics: Array [
    Object {
      origins: Array [Object {category: 'js-parser'}]
      description: Object {
        category: 'parse/js'
        message: PARTIAL_BLESSED_DIAGNOSTIC_MESSAGE {value: '<emphasis>import</emphasis> and <emphasis>export</emphasis> can only appear in a module'}
        advice: Array [
          log {
            category: 'info'
            message: 'Change the extension to <emphasis>.mjs</emphasis> to turn this file into a module'
          }
          log {
            category: 'info'
            message: 'Add <emphasis>"type": "module"</emphasis> to your <filelink emphasis target="package.json" />'
          }
        ]
      }
      location: Object {
        mtime: undefined
        sourceType: 'script'
        end: Object {
          column: 31
          index: 32
          line: 2
        }
        start: Object {
          column: 6
          index: 7
          line: 2
        }
      }
    }
  ]
  exports: Array [
    local {
      kind: 'value'
      name: 'foo'
      valueType: 'other'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 22
          index: 23
          line: 2
        }
        start: Object {
          column: 19
          index: 20
          line: 2
        }
      }
    }
    local {
      kind: 'value'
      name: 'bar'
      valueType: 'other'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 25
          index: 58
          line: 3
        }
        start: Object {
          column: 20
          index: 53
          line: 3
        }
      }
    }
    local {
      kind: 'value'
      name: 'default'
      loc: undefined
      valueType: 'other'
    }
  ]
}
```

## `discovers async import('foo')`

```javascript
Object {
  diagnostics: Array []
  exports: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {
    yes: Object {
      filename: 'unknown'
      end: Object {
        column: 18
        index: 43
        line: 4
      }
      start: Object {
        column: 15
        index: 40
        line: 4
      }
    }
  }
  dependencies: Array [
    es {
      kind: 'value'
      all: true
      async: true
      names: Array []
      optional: false
      source: './foo'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 20
          index: 21
          line: 2
        }
        start: Object {
          column: 13
          index: 14
          line: 2
        }
      }
    }
    es {
      kind: 'value'
      all: true
      async: true
      names: Array []
      optional: false
      source: './bar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 22
          index: 70
          line: 5
        }
        start: Object {
          column: 15
          index: 63
          line: 5
        }
      }
    }
  ]
}
```

## `discovers commonjs exports`

```javascript
Object {
  dependencies: Array []
  diagnostics: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'cjs'
  syntax: Array []
  topLevelLocalBindings: Object {}
  exports: Array [
    local {
      kind: 'value'
      name: 'yes'
      valueType: 'other'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 33
          index: 34
          line: 2
        }
        start: Object {
          column: 20
          index: 21
          line: 2
        }
      }
    }
    local {
      kind: 'value'
      name: 'default'
      loc: undefined
      valueType: 'other'
    }
  ]
}
```

## `discovers commonjs module.exports`

```javascript
Object {
  dependencies: Array []
  diagnostics: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'cjs'
  syntax: Array []
  topLevelLocalBindings: Object {}
  exports: Array [
    local {
      kind: 'value'
      name: 'default'
      valueType: 'other'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 36
          index: 37
          line: 2
        }
        start: Object {
          column: 23
          index: 24
          line: 2
        }
      }
    }
    local {
      kind: 'value'
      name: 'default'
      loc: undefined
      valueType: 'other'
    }
  ]
}
```

## `discovers export declarations`

```javascript
Object {
  dependencies: Array []
  diagnostics: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {
    Bar: Object {
      filename: 'unknown'
      end: Object {
        column: 22
        index: 83
        line: 4
      }
      start: Object {
        column: 19
        index: 80
        line: 4
      }
    }
    foo: Object {
      filename: 'unknown'
      end: Object {
        column: 25
        index: 55
        line: 3
      }
      start: Object {
        column: 22
        index: 52
        line: 3
      }
    }
    yes: Object {
      filename: 'unknown'
      end: Object {
        column: 22
        index: 23
        line: 2
      }
      start: Object {
        column: 19
        index: 20
        line: 2
      }
    }
  }
  exports: Array [
    local {
      kind: 'value'
      name: 'yes'
      valueType: 'other'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 22
          index: 23
          line: 2
        }
        start: Object {
          column: 19
          index: 20
          line: 2
        }
      }
    }
    local {
      kind: 'value'
      name: 'foo'
      valueType: 'function'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 25
          index: 55
          line: 3
        }
        start: Object {
          column: 22
          index: 52
          line: 3
        }
      }
    }
    local {
      kind: 'value'
      name: 'Bar'
      valueType: 'class'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 22
          index: 83
          line: 4
        }
        start: Object {
          column: 19
          index: 80
          line: 4
        }
      }
    }
  ]
}
```

## `discovers export default`

```javascript
Object {
  dependencies: Array []
  diagnostics: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {}
  exports: Array [
    local {
      kind: 'value'
      name: 'default'
      valueType: 'other'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 26
          index: 27
          line: 2
        }
        start: Object {
          column: 21
          index: 22
          line: 2
        }
      }
    }
  ]
}
```

## `discovers export from`

```javascript
Object {
  diagnostics: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {}
  exports: Array [
    external {
      kind: 'value'
      exported: 'foo'
      imported: 'foo'
      source: 'foobar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 17
          index: 18
          line: 2
        }
        start: Object {
          column: 14
          index: 15
          line: 2
        }
      }
    }
    external {
      kind: 'value'
      exported: 'bar'
      imported: 'bar'
      source: 'foobar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 22
          index: 23
          line: 2
        }
        start: Object {
          column: 19
          index: 20
          line: 2
        }
      }
    }
    external {
      kind: 'value'
      exported: 'no'
      imported: 'default'
      source: 'foobar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 37
          index: 38
          line: 2
        }
        start: Object {
          column: 24
          index: 25
          line: 2
        }
      }
    }
    external {
      kind: 'value'
      exported: 'noo'
      imported: 'boo'
      source: 'foobar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 49
          index: 50
          line: 2
        }
        start: Object {
          column: 39
          index: 40
          line: 2
        }
      }
    }
  ]
  dependencies: Array [
    es {
      kind: 'value'
      all: false
      async: false
      optional: false
      source: 'foobar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 64
          index: 65
          line: 2
        }
        start: Object {
          column: 56
          index: 57
          line: 2
        }
      }
      names: Array [
        value {
          name: 'foo'
          loc: Object {
            filename: 'unknown'
            end: Object {
              column: 17
              index: 18
              line: 2
            }
            start: Object {
              column: 14
              index: 15
              line: 2
            }
          }
        }
        value {
          name: 'bar'
          loc: Object {
            filename: 'unknown'
            end: Object {
              column: 22
              index: 23
              line: 2
            }
            start: Object {
              column: 19
              index: 20
              line: 2
            }
          }
        }
        value {
          name: 'default'
          loc: Object {
            filename: 'unknown'
            end: Object {
              column: 37
              index: 38
              line: 2
            }
            start: Object {
              column: 24
              index: 25
              line: 2
            }
          }
        }
        value {
          name: 'boo'
          loc: Object {
            filename: 'unknown'
            end: Object {
              column: 49
              index: 50
              line: 2
            }
            start: Object {
              column: 39
              index: 40
              line: 2
            }
          }
        }
      ]
    }
  ]
}
```

## `discovers export star`

```javascript
Object {
  diagnostics: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {}
  exports: Array [
    externalAll {
      kind: 'value'
      source: 'foobar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 29
          index: 30
          line: 2
        }
        start: Object {
          column: 6
          index: 7
          line: 2
        }
      }
    }
  ]
  dependencies: Array [
    es {
      kind: 'value'
      all: true
      async: false
      names: Array []
      optional: false
      source: 'foobar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 28
          index: 29
          line: 2
        }
        start: Object {
          column: 20
          index: 21
          line: 2
        }
      }
    }
  ]
}
```

## `discovers import default`

```javascript
Object {
  diagnostics: Array []
  exports: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {
    bar: Object {
      filename: 'unknown'
      end: Object {
        column: 16
        index: 17
        line: 2
      }
      start: Object {
        column: 13
        index: 14
        line: 2
      }
    }
  }
  dependencies: Array [
    es {
      kind: 'value'
      all: false
      async: false
      optional: false
      source: 'foobar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 30
          index: 31
          line: 2
        }
        start: Object {
          column: 22
          index: 23
          line: 2
        }
      }
      names: Array [
        value {
          name: 'default'
          loc: Object {
            filename: 'unknown'
            end: Object {
              column: 16
              index: 17
              line: 2
            }
            start: Object {
              column: 6
              index: 7
              line: 2
            }
          }
        }
      ]
    }
  ]
}
```

## `discovers import specifiers`

```javascript
Object {
  diagnostics: Array []
  exports: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {
    bar: Object {
      filename: 'unknown'
      end: Object {
        column: 17
        index: 18
        line: 2
      }
      start: Object {
        column: 14
        index: 15
        line: 2
      }
    }
    foo: Object {
      filename: 'unknown'
      end: Object {
        column: 22
        index: 23
        line: 2
      }
      start: Object {
        column: 19
        index: 20
        line: 2
      }
    }
    lol: Object {
      filename: 'unknown'
      end: Object {
        column: 38
        index: 39
        line: 2
      }
      start: Object {
        column: 35
        index: 36
        line: 2
      }
    }
    to: Object {
      filename: 'unknown'
      end: Object {
        column: 48
        index: 49
        line: 2
      }
      start: Object {
        column: 46
        index: 47
        line: 2
      }
    }
  }
  dependencies: Array [
    es {
      kind: 'value'
      all: false
      async: false
      optional: false
      source: 'foobar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 63
          index: 64
          line: 2
        }
        start: Object {
          column: 55
          index: 56
          line: 2
        }
      }
      names: Array [
        value {
          name: 'bar'
          loc: Object {
            filename: 'unknown'
            end: Object {
              column: 17
              index: 18
              line: 2
            }
            start: Object {
              column: 14
              index: 15
              line: 2
            }
          }
        }
        value {
          name: 'foo'
          loc: Object {
            filename: 'unknown'
            end: Object {
              column: 22
              index: 23
              line: 2
            }
            start: Object {
              column: 19
              index: 20
              line: 2
            }
          }
        }
        value {
          name: 'default'
          loc: Object {
            filename: 'unknown'
            end: Object {
              column: 38
              index: 39
              line: 2
            }
            start: Object {
              column: 24
              index: 25
              line: 2
            }
          }
        }
        value {
          name: 'ya'
          loc: Object {
            filename: 'unknown'
            end: Object {
              column: 48
              index: 49
              line: 2
            }
            start: Object {
              column: 40
              index: 41
              line: 2
            }
          }
        }
      ]
    }
  ]
}
```

## `discovers import star`

```javascript
Object {
  diagnostics: Array []
  exports: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {}
  dependencies: Array [
    es {
      kind: 'value'
      all: false
      async: false
      names: Array []
      optional: false
      source: 'foobar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 35
          index: 36
          line: 2
        }
        start: Object {
          column: 27
          index: 28
          line: 2
        }
      }
    }
  ]
}
```

## `discovers local export specifiers`

```javascript
Object {
  dependencies: Array []
  diagnostics: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {}
  exports: Array [
    local {
      kind: 'value'
      name: 'foo'
      valueType: 'other'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 17
          index: 18
          line: 2
        }
        start: Object {
          column: 14
          index: 15
          line: 2
        }
      }
    }
    local {
      kind: 'value'
      name: 'bar'
      valueType: 'other'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 22
          index: 23
          line: 2
        }
        start: Object {
          column: 19
          index: 20
          line: 2
        }
      }
    }
    local {
      kind: 'value'
      name: 'no'
      valueType: 'other'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 27
          index: 28
          line: 2
        }
        start: Object {
          column: 24
          index: 25
          line: 2
        }
      }
    }
  ]
}
```

## `discovers require('module') call`

```javascript
Object {
  diagnostics: Array []
  exports: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {}
  dependencies: Array [
    es {
      kind: 'value'
      all: false
      async: false
      names: Array []
      optional: false
      source: 'foo'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 32
          index: 33
          line: 2
        }
        start: Object {
          column: 27
          index: 28
          line: 2
        }
      }
    }
    cjs {
      kind: 'value'
      all: true
      async: false
      names: Array []
      optional: false
      source: 'bar'
      loc: Object {
        filename: 'unknown'
        end: Object {
          column: 22
          index: 82
          line: 5
        }
        start: Object {
          column: 8
          index: 68
          line: 5
        }
      }
    }
  ]
}
```

## `discovers top level await`

```javascript
Object {
  dependencies: Array []
  diagnostics: Array []
  exports: Array []
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {}
  firstTopAwaitLocation: Object {
    filename: 'unknown'
    end: Object {
      column: 20
      index: 21
      line: 2
    }
    start: Object {
      column: 6
      index: 7
      line: 2
    }
  }
}
```

## `ignores require() call if shadowed`

```javascript
Object {
  dependencies: Array []
  diagnostics: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'cjs'
  syntax: Array []
  exports: Array [
    local {
      kind: 'value'
      name: 'default'
      loc: undefined
      valueType: 'other'
    }
  ]
  topLevelLocalBindings: Object {
    yes: Object {
      filename: 'unknown'
      end: Object {
        column: 18
        index: 90
        line: 7
      }
      start: Object {
        column: 15
        index: 87
        line: 7
      }
    }
  }
}
```

## `ignores require(dynamic) call`

```javascript
Object {
  dependencies: Array []
  diagnostics: Array []
  exports: Array []
  firstTopAwaitLocation: undefined
  importFirstUsage: Array []
  moduleType: 'es'
  syntax: Array []
  topLevelLocalBindings: Object {}
}
```
